webpackJsonp([1],{0:function(t,s){},"12SR":function(t,s){},"1XP8":function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container-fluid"},[e("div",{attrs:{id:"app"}},[e("router-view")],1)])},i=[],a={render:n,staticRenderFns:i};s.a=a},HYcW:function(t,s){},LNOo:function(t,s,e){"use strict";var n=e("mvHQ"),i=e.n(n),a=e("7+uW"),c=e("I0MY"),o=e.n(c),l=e("88le"),r=e.n(l),u=e("ORbq"),d=e("O3w4"),v=e.n(d),p=e("M4fF"),h=e.n(p);a.a.use(o.a,{name:"v-touch"}),a.a.use(r.a),a.a.use(u.a),s.a={name:"call-input",data:function(){return{msg:"Welcome to Your Vue.js App",strBuf:"",callList:[],fullscreen:!1,sock:null,appStatus:"disconnected",screenSaver:!1,clickSound:null,heartBeatInterval:3e3,heartBeatTimer:null}},computed:{sendAvailable:function(){return""===this.strBuf||-1!==this.callList.indexOf(parseInt(this.strBuf))},statusClass:function(){return{"btn-connected":"connected"===this.appStatus,"btn-disconnected":"disconnected"===this.appStatus}}},methods:{numPress:function(t){this.playClick(),this.strBuf+=t},delPress:function(){this.playClick(),this.strBuf=this.strBuf.slice(0,-1)},sendCall:function(){this.playClick();var t=this,s=parseInt(this.strBuf);this.$http.post("api/queue",{call:s}).then(function(s){t.strBuf=""},function(t){console.log(t)})},clearAll:function(){this.playClick(),this.$http.delete("api/queue",{body:{del:"all"}}).then(function(t){},function(t){console.log(t)}),this.callList.splice(0,this.callList.length)},onCallClick:function(t){this.callList.indexOf(t)>-1&&this.$http.delete("api/queue",{body:{del:t}}).then(function(t){},function(t){console.log(t)})},hidePanel:function(){this.playClick(),this.$http.post("api/screensaver").then(function(t){},function(t){console.log(t)})},fullscreenToggle:function(){this.$fullscreen.toggle(document.documentElement,{wrap:!1,callback:this.fullscreenChange})},fullscreenChange:function(t){this.fullscreen=t},pageReload:function(){this.playClick(),console.log("reloading"),location.reload()},sockjsSetup:h.a.throttle(function(){console.log("SockJS connecting"),this.sock=new v.a("/api/notifications/");var t=this;this.sock.onopen=function(s){console.log("Sockjs open"),t.updateQueue(),t.appStatus="connected"},this.sock.onmessage=function(s){t.processNotification(s.data)},this.sock.onclose=function(s){console.log("SockJS closed - reconnecting."),t.appStatus="disconnected",t.sockjsSetup()}},1e4),processNotification:function(t){var s=t;clearTimeout(this.heartBeatTimer),this.heartBeatTimer=setTimeout(this.restartConnection.bind(this),3*this.heartBeatInterval),"new_call"===s.event||"delete"===s.event?this.callList=s.queue:"screensaver"===s.event&&(this.screenSaver=s.status),console.log(i()(s))},updateQueue:function(){var t=this;this.$http.get("api/queue").then(function(s){t.callList=s.body.queue,t.heartBeatInterval=1e3*s.body.heartbeat_interval},function(t){console.log(t)})},updateScreenSaver:function(){var t=this;this.$http.get("api/screensaver").then(function(s){t.screenSaver=s.body.status},function(t){console.log(t)})},playClick:function(){navigator.vibrate(50),this.clickSound.paused?this.clickSound.play():(this.clickSound.pause(),this.clickSound.currentTime=0,this.clickSound.play())},restartConnection:function(){console.log("No heart beat detected, restarting connection."),this.appStatus="disconnected",this.sockjsSetup()}},mounted:function(){this.clickSound=document.getElementById("click"),this.sockjsSetup()}}},M93x:function(t,s,e){"use strict";function n(t){e("UcJI")}var i=e("xJD8"),a=e("1XP8"),c=e("VU/8"),o=n,l=c(i.a,a.a,o,null,null);s.a=l.exports},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=e("7+uW"),i=e("M93x"),a=e("/ocq"),c=e("gNGx"),o=(e.n(c),e("qb6w")),l=(e.n(o),e("qHMK")),r=e("xKpg"),u=e("NWEg");n.a.config.productionTip=!1,n.a.use(a.a);var d=new a.a({routes:[{path:"/",name:"entry",component:u.a},{path:"/panel",name:"call-panel",component:l.a},{path:"/input",name:"call-input",component:r.a}]});new n.a({el:"#app",router:d,render:function(t){return t(i.a)}})},NWEg:function(t,s,e){"use strict";function n(t){e("HYcW")}var i=e("l/hx"),a=e("S1gE"),c=e("VU/8"),o=n,l=c(i.a,a.a,o,"data-v-334659a3",null);s.a=l.exports},NnUl:function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row main-row"},[e("div",{staticClass:"col-xs-9 latest-call"},[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.strBuf,expression:"strBuf"}],staticClass:"form-control big-input",attrs:{readonly:""},domProps:{value:t.strBuf},on:{click:t.fullscreenToggle,input:function(s){s.target.composing||(t.strBuf=s.target.value)}}})])]),t._v(" "),e("div",{staticClass:"row keypad"},[e("div",{staticClass:"row key-row"},[e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(1)}}},[t._v("1")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(2)}}},[t._v("2")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(3)}}},[t._v("3")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn btn-bcsp",on:{click:t.delPress}},[e("span",{staticClass:"glyphicon glyphicon-step-backward",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),e("div",{staticClass:"row key-row"},[e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(4)}}},[t._v("4")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(5)}}},[t._v("5")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(6)}}},[t._v("6")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("v-touch",{staticClass:"btn big-btn btn-off",attrs:{tag:"button"},on:{press:t.hidePanel}},[e("span",{staticClass:"glyphicon glyphicon-eye-close",attrs:{"aria-hidden":"true"}})])],1)]),t._v(" "),e("div",{staticClass:"row key-row"},[e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(7)}}},[t._v("7")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(8)}}},[t._v("8")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(9)}}},[t._v("9")])]),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("v-touch",{staticClass:"btn big-btn btn-clr",attrs:{tag:"button"},on:{press:t.clearAll}},[e("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}})])],1)]),t._v(" "),e("div",{staticClass:"row key-row"},[e("div",{staticClass:"col-xs-3"},[e("v-touch",{class:["btn","big-btn","btn-status",t.statusClass],attrs:{tag:"button"},on:{press:t.pageReload}},[e("span",{staticClass:"glyphicon glyphicon-signal",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),e("div",{staticClass:"col-xs-3"},[e("button",{staticClass:"btn big-btn",on:{click:function(s){t.numPress(0)}}},[t._v("0")])]),t._v(" "),e("div",{staticClass:"col-xs-6"},[e("button",{staticClass:"btn big-btn btn-snd",attrs:{disabled:t.sendAvailable},on:{click:t.sendCall}},[e("span",{staticClass:"glyphicon glyphicon-ok",attrs:{"aria-hidden":"true"}})])])])])]),t._v(" "),e("div",{staticClass:"col-xs-3 previous-calls"},[e("div",{staticClass:"previous-calls-panel"},[e("transition-group",{staticClass:"previous-call-list",attrs:{name:"previous-call-list",tag:"ul"}},t._l(t.callList,function(s){return e("v-touch",{key:s,staticClass:"previous-call-item",attrs:{tag:"li"},on:{swiperight:function(e){t.onCallClick(s)}}},[t._v(t._s(s))])}))],1),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.screenSaver,expression:"screenSaver"}],staticClass:"screensaver"})])],1)])},i=[],a={render:n,staticRenderFns:i};s.a=a},Pmlb:function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row main-row"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"disconnected"===t.appStatus,expression:"appStatus === 'disconnected'"}],staticClass:"disconnect-warning"},[e("span",{staticClass:"glyphicon glyphicon-ban-circle",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.screenSaver,expression:"screenSaver"}],staticClass:"screensaver"})]),t._v(" "),e("div",{staticClass:"col-lg-9 latest-call",on:{click:t.fullscreenToggle}},[e("p",{key:t.callList[0],staticClass:"big-number"},[t._v(t._s(t.callList.length>0?t.callList[0]:""))])]),t._v(" "),e("div",{staticClass:"col-lg-3 previous-calls"},[e("transition-group",{staticClass:"previous-call-list",attrs:{name:"previous-call-list",tag:"ul"}},t._l(t.callList.slice(1),function(s){return e("li",{key:s,staticClass:"previous-call-list-item",style:t.previousCallItemStyle},[t._v(t._s(s))])}))],1)],1)},i=[],a={render:n,staticRenderFns:i};s.a=a},S1gE:function(t,s,e){"use strict";var n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"hello"},[e("h1",[t._v("Wait-a-Bit order queue management")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"link-panel flex-panel"},[e("router-link",{attrs:{to:"panel"}},[e("div",[e("img",{staticClass:"img-responsive",attrs:{src:"static/panel_screenshot.png"}}),t._v(" "),e("span",{staticClass:"screen-link"},[t._v("Order call display panel")])])])],1),t._v(" "),e("div",{staticClass:"link-panel flex-panel"},[e("router-link",{attrs:{to:"input"}},[e("div",[e("img",{staticClass:"img-responsive",attrs:{src:"static/input_screenshot.png"}}),t._v(" "),e("span",{staticClass:"screen-link"},[t._v("Call input/control")])])])],1)])])},i=[],a={render:n,staticRenderFns:i};s.a=a},UcJI:function(t,s){},Yjln:function(t,s,e){"use strict";var n=e("mvHQ"),i=e.n(n),a=e("7+uW"),c=e("ORbq"),o=e("88le"),l=e.n(o),r=e("O3w4"),u=e.n(r),d=e("M4fF"),v=e.n(d);a.a.use(l.a),a.a.use(c.a),s.a={name:"call-panel",data:function(){return{callList:[],callListLen:4,fullscreen:!1,sock:null,appStatus:"disconnected",screenSaver:!1,screenSaverTimeout:36e5,screenSaverAuto:null,dingSound:document.getElementById("ding"),heartBeatInterval:3e3,heartBeatTimer:null}},computed:{previousCallItemStyle:function(){return{"font-size":100/(this.callListLen-1)*.611+"vh",padding:100/(this.callListLen-1)*.0599+"vh"}}},methods:{fullscreenToggle:function(){this.$fullscreen.toggle(document.documentElement,{wrap:!1,callback:this.fullscreenChange})},fullscreenChange:function(t){this.fullscreen=t},sockjsSetup:v.a.throttle(function(){console.log("SockJS connecting"),this.sock=new u.a("/api/notifications/");var t=this;this.sock.onopen=function(s){console.log("Sockjs open"),t.updateQueue(),t.updateScreenSaver(),t.appStatus="connected"},this.sock.onmessage=function(s){t.processNotification(s.data)},this.sock.onclose=function(s){console.log("SockJS closed - reconnecting."),t.appStatus="disconnected",t.sockjsSetup()}},1e4),processNotification:function(t){var s=t;clearTimeout(this.heartBeatTimer),this.heartBeatTimer=setTimeout(this.restartConnection.bind(this),3*this.heartBeatInterval),"new_call"===s.event||"delete"===s.event?("new_call"===s.event&&(this.playDing(),this.screenSaver=!1,clearTimeout(this.screenSaverAuto),this.screenSaverTimeout>0&&(this.screenSaverAuto=setTimeout(this.finishSession.bind(this),this.screenSaverTimeout))),this.callList=s.queue):"screensaver"===s.event&&(this.screenSaver=s.status,clearTimeout(this.screenSaverAuto)),console.log(i()(s))},updateQueue:function(){var t=this;this.$http.get("api/queue").then(function(s){t.callList=s.body.queue,t.callListLen=s.body.length,t.heartBeatInterval=1e3*s.body.heartbeat_interval},function(t){console.log(t)})},updateScreenSaver:function(){var t=this;this.$http.get("api/screensaver").then(function(s){t.screenSaverTimeout=1e3*s.body.timeout,t.screenSaver=s.body.status,null==t.screenSaverAuto&&t.screenSaverTimeout>0&&(t.screenSaverAuto=setTimeout(t.finishSession.bind(t),t.screenSaverTimeout))},function(t){console.log(t)})},playDing:function(){this.dingSound.paused?this.dingSound.play():(this.dingSound.pause(),this.dingSound.currentTime=0,this.dingSound.play())},finishSession:function(){this.screenSaver=!0},restartConnection:function(){console.log("No heart beat detected, restarting connection."),this.appStatus="disconnected",this.sockjsSetup()}},mounted:function(){this.sockjsSetup()}}},"l/hx":function(t,s,e){"use strict";s.a={name:"entry",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},pJs1:function(t,s){},qHMK:function(t,s,e){"use strict";function n(t){e("12SR")}var i=e("Yjln"),a=e("Pmlb"),c=e("VU/8"),o=n,l=c(i.a,a.a,o,"data-v-c33d8612",null);s.a=l.exports},qb6w:function(t,s){},xJD8:function(t,s,e){"use strict";s.a={name:"app",components:{}}},xKpg:function(t,s,e){"use strict";function n(t){e("pJs1")}var i=e("LNOo"),a=e("NnUl"),c=e("VU/8"),o=n,l=c(i.a,a.a,o,"data-v-5c7c37bd",null);s.a=l.exports}},["NHnr"]);
//# sourceMappingURL=app.93455d9bb0e26891742c.js.map